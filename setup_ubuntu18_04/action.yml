name: 'Setup Ubuntu18.04'
description: 'Install all the needed standard packages using apt and pip.'

runs:
  using: "composite"
  steps:
    #
    # build and install all dependencies.
    #

    # apt dependencies.
    - name: "apt install"
      shell: bash 
      run: |
        sudo apt update
        sudo apt install -y build-essential
        sudo apt install -y python3-pip
        sudo apt install -y cmake
        sudo apt install -y libcereal-dev
        sudo apt install -y libyaml-cpp-dev
        sudo apt install -y libboost-all-dev
        sudo apt install -y libgtest-dev
        sudo apt install -y libeigen3-dev
        sudo apt install -y libedit-dev
        sudo apt install -y doxygen
        sudo apt install -y libncurses5-dev
        sudo apt install -y freeglut3-dev
        sudo apt install -y libxmu-dev
        sudo apt install -y git
        sudo apt install -y ssh
        sudo apt install -y lsb-release
      

    # pip dependencies.
    - name: "pip install"
      shell: bash
      run: |
        python3 -m pip install -U pip
        python3 -m pip install -U "setuptools>=40.0"
        python3 -m pip install -U colcon-common-extensions
        python3 -m pip install -U treep
        python3 -m pip install -U fyplot
        python3 -m pip install -U pyside2
        python3 -m pip install -U empy
        python3 -m pip install -U flake8
        python3 -m pip install -U m2r
        python3 -m pip install -U sphinx
        python3 -m pip install -U pyjson
        python3 -m pip install -U recommonmark
        python3 -m pip install -U sphinx_rtd_theme
        python3 -m pip install -U sphinxcontrib-moderncmakedomain
        python3 -m pip install -U breathe
        python3 -m pip install -U pytest
        python3 -m pip install -U gco

    # Set python3.6 by default
    - name: Set python3 by default
      shell: bash
      run: >
        sudo update-alternatives --install /usr/bin/python python /usr/bin/python3 1

    # Setup git account:
    - name: Set git account
      shell: bash
      run: |
        git config --global user.email "mnaveau@tue.mpg.de"
        git config --global user.name "MPI-IS-BambooAgent"
